---
import ProjectCard from './ProjectCard.astro';

interface Project {
  id: string;
  data: {
    title: string;
    description: string;
    thumbnail: string;
    medium: string;
    date: string;
    featured: boolean;
    order: number;
  };
}

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;
const sorted = projects.sort((a, b) => a.data.order - b.data.order);
---

<div class="project-grid">
  {sorted.map((project) => (
    <ProjectCard
      title={project.data.title}
      description={project.data.description}
      thumbnail={project.data.thumbnail}
      slug={project.id}
      medium={project.data.medium}
      date={project.data.date}
      featured={project.data.featured}
    />
  ))}
</div>

<style>
  .project-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    padding: 2rem 0;
  }

  /* Asymmetric sizing for featured items */
  .project-grid > :global(:nth-child(1)) {
    grid-row: span 2;
  }

  .project-grid > :global(:nth-child(4)) {
    grid-column: span 2;
  }

  @media (max-width: 1024px) {
    .project-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .project-grid > :global(:nth-child(4)) {
      grid-column: span 1;
    }
  }

  @media (max-width: 600px) {
    .project-grid {
      grid-template-columns: 1fr;
    }

    .project-grid > :global(:nth-child(1)) {
      grid-row: span 1;
    }
  }
</style>
