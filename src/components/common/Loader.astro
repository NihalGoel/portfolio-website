---
---
<div class="loader" id="page-loader" aria-hidden="true">
  <div class="loader__line"></div>
</div>

<style>
  .loader {
    position: fixed;
    inset: 0;
    z-index: 10000;
    background: var(--color-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.6s ease, visibility 0.6s ease;
  }

  .loader.is-hidden {
    opacity: 0;
    visibility: hidden;
  }

  .loader__line {
    width: 60px;
    height: 2px;
    background: var(--color-accent);
    transform-origin: left;
    animation: loader-expand 1s ease-in-out infinite alternate;
  }

  @keyframes loader-expand {
    from { transform: scaleX(0.3); opacity: 0.4; }
    to { transform: scaleX(1); opacity: 1; }
  }
</style>

<script>
  function hideLoader() {
    const loader = document.getElementById('page-loader');
    if (loader) {
      setTimeout(() => loader.classList.add('is-hidden'), 600);
    }
  }

  function showLoader() {
    const loader = document.getElementById('page-loader');
    if (loader) {
      loader.classList.remove('is-hidden');
    }
  }

  // Initial page load
  document.addEventListener('DOMContentLoaded', hideLoader);

  // Astro client-side navigations (View Transitions)
  document.addEventListener('astro:before-preparation', showLoader);
  document.addEventListener('astro:page-load', hideLoader);
</script>
